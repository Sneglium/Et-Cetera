<!DOCTYPE HTML>
<head>
<link rel="stylesheet" href="../res/main.css">
<meta charset="UTF-8">
</head>

<body>
<script src="../res/generate_sidebar.js"></script>
<script>
sidebar('pages/player_utils.html', '../')
</script>

<div id='mainDoc'>
<h1> Player Utilities </h1>
<hr>
<p>
	These functions are helpful for dealing with player objects, and mostly cover gaps in the existing API.
</p>

<p>
	<h2>MISC. FUNCTIONS</h2>
	Helpers that add functionality which isn't in the Lua API but should be.
</p>

<p>
	<h3>etc.get_player_range</h3>
	<b>Usage:</b> <code>etc.get_player_range(player)</code>
	<br>
	&emsp;Returns the current interaction range of the <code>player</code>. This is calculated from the <code>range</code> property of either the player's wielded item or their hand. If neither are set, returns <code>4</code>.
</p>

<p>
	<h3>etc.get_player_pointed_thing</h3>
	<b>Usage:</b> <code>etc.get_player_pointed_thing(player, objects, liquids)</code>
	<br>
	&emsp;Returns the current 'thing' the player is pointing at, using their current interaction range. <code>objects</code> and <code>liquids</code> are booleans; set them to determine if the player can point those things. The return value of this function will be equivalent to the <code>pointed_thing</code> provided in, for example, node callbacks.
</p>

<p>
	<h3>etc.set_player_look_dir</h3>
	<b>Usage:</b> <code>etc.set_player_look_dir(player, dir)</code>
	<br>
	&emsp;Rotate's the <code>player</code>'s camera to look in the direction specified by <code>dir</code>. The direction should be a vector denoting a point on the surface of a sphere, much like the one returned by <code>player: get_look_dir</code>. It does not need to be a unit vector; this function will normalize its' input.
</p>

<p>
	<h2>SITTING</h2>
	This system allows mod developers to easily make players 'sit' at a position, which will render them unable to move until:
	 <ul>
		<li>The mod cancels the sitting state,</li>
		<li>The player presses the sneak key,</li>
		<li>The player disconnects or the server shuts down, or</li>
		<li>The player dies.</li>
	 </ul>
	When a player leaves the sitting state, they will return to the position they were at before they sat.
	<br>
	'Sitting' players will also be given the sit animation if <code>player_api</code> is installed.
</p>

<p>
	<h3>etc.set_sitting</h3>
	<b>Usage:</b> <code>etc.set_sitting(player[, pos])</code>
	<br>
	&emsp;If <code>pos</code> is a vector, the player will sit down exactly at <code>pos</code>. If <code>pos</code> is <code>nil</code> or <code>false</code>, the sitting state will be cancelled and the player will return to their original position.
</p>

<p>
	<h3>etc.get_sitting</h3>
	<b>Usage:</b> <code>etc.get_sitting(player)</code>
	<br>
	&emsp;Returns true if the player is currently sitting.
</p>

</body>
